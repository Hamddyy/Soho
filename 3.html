<!DOCTYPE html>
<html lang="ar">
<head>
    <!-- إعدادات الصفحة الأساسية -->
    <meta charset="UTF-8"> <!-- لضبط الترميز على UTF-8 لدعم النصوص العربية -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- لضبط عرض الصفحة لتتناسب مع مختلف الأجهزة -->
    <title>Soho Square</title> <!-- عنوان الصفحة -->

    <!-- تنسيقات الصفحة -->
    <style>
        /* تنسيق عام للصفحة */
        body {
            font-family: Arial, sans-serif; /* الخط المستخدم */
            direction: rtl; /* الكتابة من اليمين لليسار */
            text-align: center; /* محاذاة النص إلى المنتصف */
            background-color: #f9f9f9; /* لون الخلفية */
            margin: 0;
            padding: 20px 10px;
        }

        /* عنوان رئيسي للصفحة */
        h1 {
            font-size: 24px; /* حجم الخط */
            color: #ff8c00; /* اللون البرتقالي */
            margin-bottom: 20px; /* مسافة سفلية */
        }

        /* تنسيق الأقسام (الفئات) */
        .category {
            margin-bottom: 20px; /* مسافة بين كل فئة */
            padding: 10px; /* مسافة داخلية */
            border: 2px solid #ddd; /* إطار رمادي */
            border-radius: 10px; /* زوايا دائرية */
            background-color: #f3f3f3; /* لون خلفية فاتح */
            overflow: hidden; /* منع تجاوز المحتوى */
        }

        /* عنوان كل فئة */
        .category h2 {
            font-size: 20px; /* حجم الخط */
            color: #fff; /* لون أبيض */
            background-color: #ff8c00; /* خلفية برتقالية */
            display: inline-block; /* عرض كتلة مدمجة */
            padding: 5px 15px; /* مسافات داخلية */
            border-radius: 10px; /* زوايا دائرية */
            margin-bottom: 20px; /* مسافة سفلية */
        }

        /* المنتجات داخل كل فئة */
        .products {
            display: flex; /* عرض المنتجات أفقيًا */
            flex-wrap: nowrap; /* لا تنتقل المنتجات لسطر جديد */
            overflow-x: auto; /* تمكين التمرير الأفقي */
            gap: 16px; /* مسافة بين المنتجات */
            padding: 10px 0; /* مسافة داخلية */
            scroll-behavior: smooth; /* تمرير سلس */
        }

        /* إعدادات المنتج */
        .product {
            background-color: #fff; /* خلفية بيضاء */
            border: 1px solid #ddd; /* إطار رمادي */
            border-radius: 8px; /* زوايا دائرية */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* ظل خفيف */
            text-align: center; /* توسيط النص */
            min-width: 250px; /* عرض المنتج الأدنى */
            flex: 0 0 auto; /* لا يتمدد */
            margin: 10px;
            transition: transform 0.3s ease; /* تأثير عند التفاعل */
        }

        /* تأثير المنتج عند تمرير الماوس */
        .product:hover {
            transform: scale(1.05); /* تكبير المنتج */
        }

        /* صورة المنتج */
        .product img {
            width: 100%; /* عرض كامل */
            height: 150px; /* ارتفاع محدد */
            object-fit: cover; /* ملاءمة الصورة */
        }

        /* اسم المنتج */
        .product h1 {
            font-size: 18px; /* حجم النص */
            color: #333; /* لون داكن */
            margin: 10px 0; /* مسافة حول النص */
        }

        /* وصف المنتج */
        .product p {
            margin: 5px 0; /* مسافة حول النص */
            color: #7D7098; /* لون رمادي */
            font-size: 14px; /* حجم النص */
        }

        /* زر الإضافة إلى السلة */
        .product .add-to-cart {
            display: inline-block; /* عرض كتلة */
            background-color: #ff8c00; /* لون برتقالي */
            color: #fff; /* لون النص أبيض */
            padding: 10px 20px; /* مسافات داخلية */
            border-radius: 5px; /* زوايا دائرية */
            cursor: pointer; /* مؤشر الفأرة */
            margin: 10px auto; /* مسافة حول الزر */
            transition: background-color 0.3s ease, transform 0.3s ease; /* تأثير عند التفاعل */
        }

        .product .add-to-cart:hover {
            background-color: #e07b00; /* تغير اللون عند التفاعل */
            transform: translateY(-2px); /* تحريك الزر */
        }
    </style>
</head>
<body>
    <h1>Soho Square</h1> <!-- عنوان الصفحة الرئيسي -->

    <!-- قائمة التنقل الجانبية -->
    <button class="menu-button" onclick="toggleMenu()">☰</button> <!-- زر لفتح القائمة الجانبية -->
    <div class="hamburger-menu" id="hamburgerMenu">
        <ul id="menuList"></ul> <!-- قائمة الفئات داخل التنقل -->
    </div>

    <!-- أقسام المنتجات -->
    <div id="categories"></div>

    <!-- السلة العائمة -->
    <div class="floating-cart" onclick="toggleCart()">
        <span id="cart-count">0</span> <!-- عدد العناصر في السلة -->
        <div class="cart-icon">
            <img src="https://raw.githubusercontent.com/Hamddyy/Res/refs/heads/main/images/cart.png" alt="سلة المشتريات">
        </div>
    </div>

    <!-- السلة المنسدلة -->
    <div id="cart-dropdown" class="cart-dropdown">
        <div id="cart-close-btn" class="cart-close-btn" onclick="closeCart()">×</div> <!-- زر إغلاق السلة -->
        <ul id="cart-list"></ul> <!-- قائمة المنتجات في السلة -->
        <div class="total-amount">
            إجمالي المبلغ: <span class="cart-total">0 جنيه</span>
        </div>
        <button id="send-order" onclick="sendOrder()">إرسال الطلب</button> <!-- زر إرسال الطلب -->
    </div>

    <!-- كود JavaScript لإدارة المنتجات والسلة -->
    <script>
        let allProducts = []; // قائمة المنتجات
        let cart = []; // السلة

        // جلب المنتجات من JSON
        async function fetchProducts() {
            try {
                const response = await fetch('https://raw.githubusercontent.com/Hamddyy/menu1/refs/heads/main/sohomenu.json');
                const data = await response.json();
                allProducts = data;
                displayCategories(); // عرض المنتجات
            } catch (error) {
                console.error('خطأ في تحميل المنتجات:', error);
            }
        }

        // عرض المنتجات
        function displayCategories() {
            const categoriesContainer = document.getElementById('categories');
            const categories = allProducts.reduce((acc, product) => {
                if (!acc[product.category]) acc[product.category] = [];
                acc[product.category].push(product);
                return acc;
            }, {});

            for (const [category, products] of Object.entries(categories)) {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category';
                categoryDiv.innerHTML = `<h2>${category}</h2>`;
                const productsGrid = document.createElement('div');
                productsGrid.className = 'products';

                products.forEach(product => {
                    const productDiv = document.createElement('div');
                    productDiv.className = 'product';
                    productDiv.innerHTML = `
                        <img src="${product.image}" alt="${product.name}">
                        <h1>${product.name}</h1>
                        <p>${product.description || 'لا توجد تفاصيل'}</p>
                        <p>${product.price} جنيه</p>
                        <button class="add-to-cart" onclick="addToCart('${product.name}', ${product.price})">أضف للسلة</button>
                    `;
                    productsGrid.appendChild(productDiv);
                });

                categoryDiv.appendChild(productsGrid);
                categoriesContainer.appendChild(categoryDiv);
            }
        }

        // إضافة منتج للسلة
        function addToCart(name, price) {
            cart.push({ name, price });
            updateCartDisplay();
        }

        // تحديث السلة
        function updateCartDisplay() {
            const cartList = document.getElementById('cart-list');
            cartList.innerHTML = '';
            cart.forEach(item => {
                const li = document.createElement('li');
                li.textContent = `${item.name}: ${item.price} جنيه`;
                cartList.appendChild(li);
            });
        }

        fetchProducts(); // استدعاء جلب البيانات
    </script>
</body>
</html>
